---
import { getAllPosts, getUniqueTagsWithCount } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";

const allPosts = await getAllPosts();
const allTags = getUniqueTagsWithCount(allPosts);

const meta = {
  description: "Lista wszystkich tematów, o których pisałem",
  title: "Wszystkie tagi",
};
---

<PageLayout meta={meta}>
  <h1
    class="section__title section__title--large"
    style="margin-block-end: var(--space-250)"
  >
    Tagi
  </h1>
  <ul class="list">
    {
      allTags.map(([tag, val]) => (
        <li style="display: flex; align-items: center; gap: var(--space-100)">
          <a
            href={`/tagi/${tag}/`}
            title={`Zobacz artykuły z tagiem: ${tag}`}
            style="text-decoration: underline; text-underline-offset: 2px"
          >
            &#35;{tag}
          </a>
          <span>
            - {val} {val === 1 ? "artykuł" : val < 5 ? "artykuły" : "artykułów"}
          </span>
        </li>
      ))
    }
  </ul>
</PageLayout>
