---
import { getAllPosts, getUniqueTagsWithCount } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { translations } from "@/i18n/translations";

const t = translations.en.pages.tags;

const allPosts = await getAllPosts();
const allTags = getUniqueTagsWithCount(allPosts);

const meta = {
  description: t.meta.description,
  title: t.meta.title,
};
---

<PageLayout meta={meta}>
  <h1
    class="section__title section__title--large"
    style="margin-block-end: var(--space-250)"
  >
    {t.title}
  </h1>
  <ul class="list">
    {
      allTags.map(([tag, val]) => (
        <li style="display: flex; align-items: center; gap: var(--space-100)">
          <a
            href={`/tags/${tag}/`}
            title={`${t.viewAllPostsWithTag}: ${tag}`}
            style="text-decoration: underline; text-underline-offset: 2px"
          >
            &#35;{tag}
          </a>
          <span>- {t.postCount(val)}</span>
        </li>
      ))
    }
  </ul>
</PageLayout>
