---
import { getFormattedDate } from "@/utils/date";
import type { HTMLAttributes } from "astro/types";

type Size = "sm" | "base" | "lg";

type Props = HTMLAttributes<"time"> & {
  date: Date;
  dateTimeOptions?: Intl.DateTimeFormatOptions;
  size?: Size;
};

const {
  date,
  dateTimeOptions,
  size = "base",
  class: className,
  ...attrs
} = Astro.props;

const postDate = getFormattedDate(date, dateTimeOptions);
const ISO = date.toISOString();

const sizeClasses: Record<Size, string> = {
  sm: "text--small",
  base: "",
  lg: "text--large",
};
const sizeClass = sizeClasses[size];
---

<time datetime={ISO} title={ISO} class:list={[sizeClass, className]} {...attrs}
  >{postDate}</time
>
